<div class="gray-header-area"></div>
<section data-ng-controller="UnitsController">
	<div class="sub-container" style="margin-top: 20px;">
		<ol class="breadcrumb">
			<li><a href="#!/properties">Properties</a></li>
			<li class="active">{{property.propertyName}}</li>
		</ol>
		<div class="sub-header">
			<h3 class="pull-left">{{property.propertyName}}</h3>
			<div class="pull-right">
				<button type="button" class="btn btn-large custom-gray-btn" style="padding: 15px; border: 1px solid; margin-right: 10px;" ng-click="openPropertyInfo()">Property Info</button>
				<button type="button" class="btn btn-large btn-success" style="padding: 15px;" ng-click="openUnitModal()">Add new unit</button>
			</div>
		</div>
		<div class="clearfix"></div>
		<div class="maincontent-area">
			<div class="table-responsive">
				<table class="table table-hover" st-pipe="findUnits" st-table="units" st-safe-src="units">
					<thead>
					<tr>
						<th st-sort-default="unitNumber" st-sort="unitNumber">Unit #</th>
						<th st-sort="buildingNumber">Unit Address</th>
						<th>Resident Name</th>
						<th st-sort="moveInDate">Move in</th>
						<th st-sort="moveOutDate">Move out</th>
						<th>Unit Status</th>
						<th>Action</th>
					</tr>
					</thead>
					<tbody>
					<tr ng-repeat="unit in units">
						<td>{{unit.unitNumber}}</td>
						<td>{{unit.buildingNumber}}</td>
						<td>
							<a href="#!/properties/{{property._id}}/units/{{unit._id}}/{{unit.resident._id}}/insurances" ng-if="unit.resident">
								{{unit.resident.displayName}}
							</a>
							<button type="btn btn-default" ng-if="!unit.resident" ng-click="displayExtraResidentModal(unit)">Add resident</button>
						</td>
						<td>{{unit.moveInDate | date: 'MMM d, yyyy'}}</td>
						<td>{{unit.moveOutDate | date: 'MMM d, yyyy'}}</td>
						<td>{{unit.resident?'occupied': 'vacant'}}</td>
						<td>
							<a href="" ng-click="removeUnit(unit)"><span class="glyphicon glyphicon-trash"></span></a> |
							<a href="" ng-click="openUnitModal(unit)"><span class="glyphicon glyphicon-pencil"></span></a>
						</td>
					</tr>
					</tbody>
					<tfoot>
					<tr>
						<td class="text-center" colspan="7">
							<span class="pull-left" style="margin: 20px 0;">Total: {{totalItems}}</span>
							<nav class="pull-right" ng-if="numberOfPages >= 2">
								<ul class="pagination">
									<li><a ng-click="selectPage(currentPage - 1)">&lt;</a></li>
									<li><a>{{currentPage}} of {{numberOfPages}}</a></li>
									<li><a ng-click="selectPage(currentPage + 1)">&gt;</a></li>
								</ul>
							</nav>
						</td>
					</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
</section>
