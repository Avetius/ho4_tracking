<div class="gray-header-area"></div>
<section data-ng-controller="UnitsController">
	<div class="sub-container" style="margin-top: 20px;">
		<ol class="breadcrumb" ng-if="authentication.user.roles.indexOf('admin')>-1">
			<li><a href="#!/property_managers">Property Manager</a></li>
			<li><a href="#!/properties_by_manager/{{property_manager._id}}/properties">{{property_manager.displayName}}</a></li>
			<li class="active">{{property.propertyName}}</li>
		</ol>
		<ol class="breadcrumb" ng-if="authentication.user.roles.indexOf('pmanager')>-1">
			<li><a href="#!/properties">Active properties</a></li>
			<li class="active">{{property.propertyName}}</li>
		</ol>
		<div class="sub-header">
			<h3 class="pull-left">{{property.propertyName}}</h3>
			<div class="pull-right">
				<button type="button" class="btn btn-large custom-gray-btn" style="padding: 15px; border: 1px solid; margin-right: 10px;" ng-click="openPropertyInfo()">Property Info</button>
				<button type="button" class="btn btn-large btn-success" style="padding: 15px;" ng-click="openUnitModal()">Add new unit</button>
			</div>
		</div>
		<div class="clearfix"></div>
		<div class="maincontent-area">
			<div class="table-responsive">
				<table class="table table-hover" st-pipe="findUnits" st-table="units" st-safe-src="units">
					<thead>
					<tr>
						<th>Number Of Unit</th>
						<th>Unit Address</th>
						<th>Resident Name</th>
						<th>Action</th>
					</tr>
					</thead>
					<tbody>
					<tr ng-repeat="unit in units">
						<td>{{unit.unitNumber}}</td>
						<td>{{unit.buildingNumber}}</td>
						<td>
							<a href="#!/properties/{{property._id}}/units/{{unit._id}}/{{unit.resident._id}}/insurances" ng-if="authentication.user.roles.indexOf('pmanager')>-1">
								{{unit.resident.displayName}}
							</a>
							<a href="#!/properties_by_manager/{{property_manager._id}}/properties/{{property._id}}/units/{{unit._id}}/{{unit.resident._id}}/insurances" ng-if="authentication.user.roles.indexOf('admin')>-1">
								{{unit.resident.displayName}}
							</a>
						</td>
						<td>
							<a href="" ng-click="openUnitModal(unit)">Edit</a> |
							<a href="" ng-click="removeUnit(unit)">Remove</a>
						</td>
					</tr>
					</tbody>
					<tfoot>
					<tr>
						<td class="text-center" colspan="4">
							<span class="pull-left" style="margin: 20px 0;">Total: {{totalItems}}</span>
							<nav class="pull-right" ng-if="numberOfPages >= 2">
								<ul class="pagination">
									</li><li><a ng-click="selectPage(currentPage - 1)">&lt;</a>
									</li><li><a>{{currentPage}} of {{numberOfPages}}</a>
									</li><li><a ng-click="selectPage(currentPage + 1)">&gt;</a>
								</ul>
							</nav>
						</td>
					</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
</section>
